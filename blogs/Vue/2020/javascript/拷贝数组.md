---
title: JavaScriptä¸­åä¸ªæ‹·è´æ•°ç»„çš„æ–¹æ³•
date: 2020-04-18
tags:
 - javascript
 - æ•°ç»„
categories: 
 - JavaScript
---

:::tip Abstract
1. æ‹·è´æ•°ç»„
2. æ·±æ‹·è´ + æµ…æ‹·è´
:::

<!-- more -->

![aRy62V.png](https://s1.ax1x.com/2020/08/07/aRy62V.png)

## 1ã€æ‰©å±•è¿ç®—ç¬¦ï¼ˆæµ…æ‹·è´ï¼‰

è‡ªä»ES6å‡ºç°ä»¥æ¥ï¼Œè¿™å·²ç»æˆä¸ºæœ€æµè¡Œçš„æ–¹æ³•ã€‚å®ƒæ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„è¯­æ³•ï¼Œä½†æ˜¯å½“ä½ åœ¨ä½¿ç”¨ç±»ä¼¼äºReactå’ŒReduxè¿™ç±»åº“æ—¶ï¼Œä½ ä¼šå‘ç°å®ƒæ˜¯éå¸¸éå¸¸æœ‰ç”¨çš„ã€‚

```js
numbers = [1, 2, 3];
numbersCopy = [...numbers];

```

> è¿™ä¸ªæ–¹æ³•ä¸èƒ½æœ‰æ•ˆçš„æ‹·è´å¤šç»´æ•°ç»„ã€‚æ•°ç»„/å¯¹è±¡å€¼çš„æ‹·è´æ˜¯é€šè¿‡å¼•ç”¨è€Œä¸æ˜¯å€¼å¤åˆ¶ã€‚

```js
// ğŸ˜Š
numbersCopy.push(4);
console.log(numbers, numbersCopy);
// [1, 2, 3] and [1, 2, 3, 4]
// åªä¿®æ”¹äº†æˆ‘ä»¬å¸Œæœ›ä¿®æ”¹çš„ï¼ŒåŸæ•°ç»„ä¸å—å½±å“

// ğŸ˜¢
nestedNumbers = [[1], [2]];
numbersCopy = [...nestedNumbers];
numbersCopy[0].push(300);
console.log(nestedNumbers, numbersCopy);
// [[1, 300], [2]]
// [[1, 300], [2]]
// ç”±äºå…¬ç”¨å¼•ç”¨ï¼Œæ‰€ä»¥ä¸¤ä¸ªæ•°ç»„éƒ½è¢«ä¿®æ”¹äº†ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çš„

```

## 2ã€for()å¾ªç¯ï¼ˆæµ…æ‹·è´ï¼‰

è€ƒè™‘åˆ°å‡½æ•°å¼ç¼–ç¨‹å˜å¾—è¶Šæ¥è¶Šæµè¡Œï¼Œæˆ‘è®¤ä¸ºè¿™ç§æ–¹æ³•å¯èƒ½æ˜¯æœ€ä¸å—æ¬¢è¿çš„ã€‚

```js
numbers = [1, 2, 3];
numbersCopy = [];
for (i = 0; i < numbers.length; i++) {
  numbersCopy[i] = numbers[i];
}


```

> è¿™ä¸ªæ–¹æ³•ä¸èƒ½æœ‰æ•ˆçš„æ‹·è´å¤šç»´æ•°ç»„ã€‚å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯`=`è¿ç®—ç¬¦ï¼Œå®ƒåœ¨å¤„ç†æ•°ç»„/å¯¹è±¡å€¼çš„æ‹·è´æ—¶é€šè¿‡å¼•ç”¨è€Œä¸æ˜¯å€¼å¤åˆ¶ã€‚

```js
// ğŸ˜Š
numbersCopy.push(4);
console.log(numbers, numbersCopy);
// [1, 2, 3] and [1, 2, 3, 4]

// ğŸ˜¢
nestedNumbers = [[1], [2]];
numbersCopy = [];
for (i = 0; i < nestedNumbers.length; i++) {
  numbersCopy[i] = nestedNumbers[i];
}
numbersCopy[0].push(300);
console.log(nestedNumbers, numbersCopy);
// [[1, 300], [2]]
// [[1, 300], [2]]
// ç”±äºå…¬ç”¨å¼•ç”¨ï¼Œæ‰€ä»¥ä¸¤ä¸ªæ•°ç»„éƒ½è¢«ä¿®æ”¹äº†ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çš„


```

## 3ã€while()å¾ªç¯ï¼ˆæµ…æ‹·è´ï¼‰

å’Œ`for()` ç±»ä¼¼ã€‚

```js
numbers = [1, 2, 3];
numbersCopy = [];
i = -1;
while (++i < numbers.length) {
  numbersCopy[i] = numbers[i];
}

```

## 4ã€Array.mapï¼ˆæµ…æ‹·è´ï¼‰

ä¸Šé¢çš„`for`å’Œ`while`éƒ½æ˜¯å¾ˆâ€œå¤è€â€çš„æ–¹å¼ï¼Œè®©æˆ‘ä»¬ç»§ç»­å›åˆ°å½“å‰ï¼Œæˆ‘ä»¬ä¼šå‘ç°`map`æ–¹æ³•ã€‚`map`æºäºæ•°å­¦ï¼Œæ˜¯å°†ä¸€ä¸ªé›†åˆè½¬æ¢æˆå¦ä¸€ç§é›†åˆï¼ŒåŒæ—¶ä¿ç•™ç»“æ„çš„æ¦‚å¿µã€‚

åœ¨è‹±è¯­ä¸­ï¼Œå®ƒæ„å‘³ç€`Array.map` æ¯æ¬¡è¿”å›ç›¸åŒé•¿åº¦çš„æ•°ç»„ã€‚

```js
numbers = [1, 2, 3];
double = (x) => x * 2;

numbers.map(double);

```

å½“æˆ‘ä»¬ä½¿ç”¨`map`æ–¹æ³•æ—¶ï¼Œéœ€è¦ç»™å‡ºä¸€ä¸ª`callback`å‡½æ•°ç”¨äºå¤„ç†å½“å‰çš„æ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„å…ƒç´ ã€‚

**å’Œæ‹·è´æ•°ç»„æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ**

å½“æˆ‘ä»¬æƒ³è¦å¤åˆ¶ä¸€ä¸ªæ•°ç»„çš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨`map`çš„`callback`å‡½æ•°ä¸­ç›´æ¥è¿”å›åŸæ•°ç»„çš„å…ƒç´ å³å¯ã€‚

```js
numbers = [1, 2, 3];
numbersCopy = numbers.map((x) => x);

```

å¦‚æœä½ æƒ³æ›´æ•°å­¦åŒ–ä¸€ç‚¹ï¼Œ`(x) => x`å«åš`æ’ç­‰å¼`ã€‚å®ƒè¿”å›ç»™å®šçš„ä»»ä½•å‚æ•°ã€‚

```js
identity = (x) => x;
numbers.map(identity);
// [1, 2, 3]

```

> åŒæ ·çš„ï¼Œå¤„ç†å¯¹è±¡å’Œæ•°ç»„çš„æ—¶å€™æ˜¯å¼•ç”¨è€Œä¸æ˜¯å€¼å¤åˆ¶ã€‚

## 5ã€Array.filterï¼ˆæµ…æ‹·è´ï¼‰

`Array.filter`æ–¹æ³•åŒæ ·ä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œä½†æ˜¯å¹¶ä¸ä¸€å®šæ˜¯è¿”å›åŒæ ·é•¿åº¦çš„ï¼Œè¿™å’Œæˆ‘ä»¬çš„è¿‡æ»¤æ¡ä»¶æœ‰å…³ã€‚

```js
[1, 2, 3].filter((x) => x % 2 === 0)
// [2]

```

å½“æˆ‘ä»¬çš„è¿‡æ»¤æ¡ä»¶æ€»æ˜¯trueæ—¶ï¼Œå°±å¯ä»¥ç”¨æ¥å®ç°æ‹·è´ã€‚

```js
numbers = [1, 2, 3];
numbersCopy = numbers.filter(() => true);
// [1, 2, 3]

```

> åŒæ ·çš„ï¼Œå¤„ç†å¯¹è±¡å’Œæ•°ç»„çš„æ—¶å€™æ˜¯å¼•ç”¨è€Œä¸æ˜¯å€¼å¤åˆ¶ã€‚

## 6ã€Array.reduceï¼ˆæµ…æ‹·è´ï¼‰

å…¶å®ç”¨`reduce`æ¥æ‹·è´æ•°ç»„å¹¶æ²¡æœ‰å±•ç¤ºå‡ºå®ƒçš„å®é™…åŠŸèƒ½ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯è¦å°†å…¶èƒ½å¤Ÿæ‹·è´æ•°ç»„çš„èƒ½åŠ›è¯´ä¸€ä¸‹çš„

```js
numbers = [1, 2, 3];
numbersCopy = numbers.reduce((newArray, element) => {
  newArray.push(element);
  return newArray;
}, []);

```

`reduce()` æ–¹æ³•å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªç”±æ‚¨æä¾›çš„`reducer`å‡½æ•°ï¼Œå°†å…¶ç»“æœæ±‡æ€»ä¸ºå•ä¸ªè¿”å›å€¼ã€‚

ä¸Šé¢æˆ‘ä»¬çš„ä¾‹å­ä¸­åˆå§‹å€¼æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæˆ‘ä»¬åœ¨éå†åŸæ•°ç»„çš„æ—¶å€™æ¥å¡«å……è¿™ä¸ªç©ºæ•°ç»„ã€‚è¯¥æ•°ç»„å¿…é¡»è¦ä»ä¸‹ä¸€ä¸ªè¿­ä»£å‡½æ•°çš„æ‰§è¡Œåè¢«è¿”å›å‡ºæ¥ã€‚

> åŒæ ·çš„ï¼Œå¤„ç†å¯¹è±¡å’Œæ•°ç»„çš„æ—¶å€™æ˜¯å¼•ç”¨è€Œä¸æ˜¯å€¼å¤åˆ¶ã€‚

## 7ã€Array.sliceï¼ˆæµ…æ‹·è´ï¼‰

`slice` æ–¹æ³•æ ¹æ®æˆ‘ä»¬æŒ‡å®šçš„startã€endçš„indexä»åŸæ•°ç»„ä¸­è¿”å›ä¸€ä¸ªæµ…æ‹·è´çš„æ•°ç»„ã€‚

```js
[1, 2, 3, 4, 5].slice(0, 3);
// [1, 2, 3]
// Starts at index 0, stops at index 3

// å½“ä¸ç»™å®šå‚æ•°æ—¶ï¼Œå°±è¿”å›äº†åŸæ•°ç»„çš„æ‹·è´
numbers = [1, 2, 3, 4, 5];
numbersCopy = numbers.slice();
// [1, 2, 3, 4, 5]

```

> åŒæ ·çš„ï¼Œå¤„ç†å¯¹è±¡å’Œæ•°ç»„çš„æ—¶å€™æ˜¯å¼•ç”¨è€Œä¸æ˜¯å€¼å¤åˆ¶ã€‚

## 8ã€JSON.parse & JSON.stringifyï¼ˆæ·±æ‹·è´ï¼‰

`JSON.stringify`å°†ä¸€ä¸ªå¯¹è±¡è½¬æˆå­—ç¬¦ä¸²ï¼› `JSON.parse`å°†è½¬æˆçš„å­—ç¬¦ä¸²è½¬å›å¯¹è±¡ã€‚

å°†å®ƒä»¬ç»„åˆèµ·æ¥å¯ä»¥å°†å¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œç„¶ååè½¬è¿™ä¸ªè¿‡ç¨‹æ¥åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„æ•°æ®ç»“æ„ã€‚

```js
nestedNumbers = [[1], [2]];
numbersCopy = JSON.parse(
  JSON.stringify(nestedNumbers)
);
numbersCopy[0].push(300);
console.log(nestedNumbers, numbersCopy);
// [[1], [2]]
// [[1, 300], [2]]
// These two arrays are completely separate!

```

> è¿™ä¸ªå¯ä»¥å®‰å…¨åœ°æ‹·è´æ·±åº¦åµŒå¥—çš„å¯¹è±¡/æ•°ç»„

### å‡ ç§ç‰¹æ®Šæƒ…å†µ

1ã€å¦‚æœobjé‡Œé¢æœ‰æ—¶é—´å¯¹è±¡ï¼Œåˆ™JSON.stringifyåå†JSON.parseçš„ç»“æœï¼Œæ—¶é—´å°†åªæ˜¯å­—ç¬¦ä¸²çš„å½¢å¼ã€‚è€Œä¸æ˜¯æ—¶é—´å¯¹è±¡ï¼›

```js
var test = {
  name: 'a',
  date: [new Date(1536627600000), new Date(1540047600000)],
};

let b;
b = JSON.parse(JSON.stringify(test))
console.log(b)

```

2ã€å¦‚æœobjé‡Œæœ‰RegExpã€Errorå¯¹è±¡ï¼Œåˆ™åºåˆ—åŒ–çš„ç»“æœå°†åªå¾—åˆ°ç©ºå¯¹è±¡ï¼›

```js
const test = {
  name: 'a',
  date: new RegExp('\\w+'),
};
// debugger
const copyed = JSON.parse(JSON.stringify(test));
test.name = 'test'
console.log('ddd', test, copyed)

```

3ã€å¦‚æœobjé‡Œæœ‰å‡½æ•°ï¼Œundefinedï¼Œåˆ™åºåˆ—åŒ–çš„ç»“æœä¼šæŠŠå‡½æ•°æˆ– undefinedä¸¢å¤±ï¼›

```js
const test = {
  name: 'a',
  date: function hehe() {
    console.log('fff')
  },
};
// debugger
const copyed = JSON.parse(JSON.stringify(test));
test.name = 'test'
console.error('ddd', test, copyed)

```

4ã€å¦‚æœobjé‡Œæœ‰NaNã€Infinityå’Œ-Infinityï¼Œåˆ™åºåˆ—åŒ–çš„ç»“æœä¼šå˜æˆnull

5ã€JSON.stringify()åªèƒ½åºåˆ—åŒ–å¯¹è±¡çš„å¯æšä¸¾çš„è‡ªæœ‰å±æ€§ï¼Œä¾‹å¦‚ å¦‚æœobjä¸­çš„å¯¹è±¡æ˜¯æœ‰æ„é€ å‡½æ•°ç”Ÿæˆçš„ï¼Œ åˆ™ä½¿ç”¨JSON.parse(JSON.stringify(obj))æ·±æ‹·è´åï¼Œä¼šä¸¢å¼ƒå¯¹è±¡çš„constructorï¼›

```js
function Person(name) {
  this.name = name;
  console.log(name)
}

const liai = new Person('liai');

const test = {
  name: 'a',
  date: liai,
};
// debugger
const copyed = JSON.parse(JSON.stringify(test));
test.name = 'test'
console.error('ddd', test, copyed)

```

> å‚è€ƒæ–‡ç« ï¼š[å…³äºJSON.parse(JSON.stringify(obj))å®ç°æ·±æ‹·è´åº”è¯¥æ³¨æ„çš„å‘](https://www.jianshu.com/p/b084dfaad501)

## 9ã€Array.concatï¼ˆæµ…æ‹·è´ï¼‰

`concat`å°†æ•°ç»„ä¸å€¼æˆ–å…¶ä»–æ•°ç»„è¿›è¡Œç»„åˆã€‚

```js
[1, 2, 3].concat(4); // [1, 2, 3, 4]
[1, 2, 3].concat([4, 5]); // [1, 2, 3, 4, 5]

```

å¦‚æœæˆ‘ä»¬ä¸æŒ‡å®šå‚æ•°æˆ–è€…æä¾›ä¸€ä¸ªç©ºæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå°±å¯ä»¥è¿›è¡Œæµ…æ‹·è´ã€‚

```js
[1, 2, 3].concat(); // [1, 2, 3]
[1, 2, 3].concat([]); // [1, 2, 3]

```

> åŒæ ·çš„ï¼Œå¤„ç†å¯¹è±¡å’Œæ•°ç»„çš„æ—¶å€™æ˜¯å¼•ç”¨è€Œä¸æ˜¯å€¼å¤åˆ¶ã€‚

## 10ã€Array.fromï¼ˆæµ…æ‹·è´ï¼‰

å¯ä»¥å°†ä»»ä½•å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„ã€‚ç»™ä¸€ä¸ªæ•°ç»„è¿”å›ä¸€ä¸ªæµ…æ‹·è´ã€‚

```js
console.log(Array.from('foo'))
// ['f', 'o', 'o']

numbers = [1, 2, 3];
numbersCopy = Array.from(numbers)
// [1, 2, 3]

```

> åŒæ ·çš„ï¼Œå¤„ç†å¯¹è±¡å’Œæ•°ç»„çš„æ—¶å€™æ˜¯å¼•ç”¨è€Œä¸æ˜¯å€¼å¤åˆ¶ã€‚

------

## å°ç»“

ä¸Šé¢è¿™äº›æ–¹æ³•éƒ½æ˜¯åœ¨ä½¿ç”¨ä¸€ä¸ªæ­¥éª¤æ¥è¿›è¡Œæ‹·è´ã€‚å¦‚æœæˆ‘ä»¬ç»“åˆä¸€äº›å…¶ä»–çš„æ–¹æ³•æˆ–æŠ€æœ¯èƒ½å¤Ÿå‘ç°è¿˜æœ‰å¾ˆå¤šçš„æ–¹å¼æ¥å®ç°æ•°ç»„çš„æ‹·è´ï¼Œæ¯”å¦‚ä¸€ç³»åˆ—çš„æ‹·è´å·¥å…·å‡½æ•°ç­‰ã€‚

 