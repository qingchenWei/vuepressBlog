{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{537:function(t,n,e){\"use strict\";e.r(n);var o=e(4),s=Object(o.a)({},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[e(\"h1\",{attrs:{id:\"mongodb-nosql封装\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#mongodb-nosql封装\"}},[t._v(\"#\")]),t._v(\" MongoDb nosql封装\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"完整实例\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#完整实例\"}},[t._v(\"#\")]),t._v(\" 完整实例\")]),t._v(\" \"),e(\"h1\",{attrs:{id:\"\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#\"}},[t._v(\"#\")]),t._v(\" (```)\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[t._v('module.exports = {\\n    insert(options) {\\n        return new Promise((resolve, reject) => {\\n            options = options || {};\\n            options.data = options.data || [];\\n            options.colname.insertMany(options.data, (err) => {\\n                err ? reject(err) : resolve();\\n            })\\n        })\\n    },\\n    update(options) {\\n        return new Promise((resolve, reject) => {\\n            options = options || {};\\n            options.where = options.where || {};\\n            options.newdata = options.newdata || {};\\n            options.type = options.type || 1;\\n            options.type = options.type === 1 ? \"updateOne\" : \"updateMany\";\\n            options.colname[options.type](options.where, options.newdata, (err) => {\\n                err ? reject(err) : resolve();\\n            })\\n        })\\n    },\\n    delete(options) {\\n        return new Promise((resolve, reject) => {\\n            options = options || {};\\n            options.type = options.type || 1;\\n            options.type = options.type === 1 ? \"deleteOne\" : \"deleteMany\";\\n            options.where = options.where || {};\\n            options.colname[options.type](options.where, (err) => {\\n                err ? reject(err) : resolve();\\n            });\\n        })\\n    },\\n    find(options) {\\n        return new Promise((resolve, reject) => {\\n            options = options || {};\\n            options.where = options.where || {};\\n            options.show = options.show || {\\n                _id: 0,\\n                __v: 0\\n            };\\n            options.setting = options.setting || {};\\n            let find = options.colname.find(options.where, options.show, (ere, data) => {\\n                if (data.length != undefined) {\\n                    let arr = [];\\n                    data.forEach((val) => {\\n                        arr.push(val._doc);\\n                    })\\n                    resolve(arr)\\n                } else {\\n                    reject(data);\\n                }\\n            });\\n            if (typeof options.setting.sort === \"object\") {\\n                find.sort(options.setting.sort);\\n            }\\n            if (typeof options.setting.limit === \"number\") {\\n                find.limit(options.setting.limit);\\n            }\\n            if (typeof options.setting.skip === \"number\") {\\n                find.skip(options.setting.skip);\\n            }\\n        })\\n    }\\n}\\n')])])]),e(\"h1\",{attrs:{id:\"-2\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#-2\"}},[t._v(\"#\")]),t._v(\" (```)\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"insert\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#insert\"}},[t._v(\"#\")]),t._v(\" insert\")]),t._v(\" \"),e(\"h1\",{attrs:{id:\"-3\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#-3\"}},[t._v(\"#\")]),t._v(\" (```)\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[t._v(\"insert(options) {\\n    options = options || {};\\n    return new Promise((resolve, reject) => {\\n        options.data = options.data || [];\\n        options.colname.insertMany(options.data, (err) => {\\n            err ? reject(err) : resolve();\\n        })\\n    })\\n}\\n\")])])]),e(\"h1\",{attrs:{id:\"-4\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#-4\"}},[t._v(\"#\")]),t._v(\" (```)\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"update\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#update\"}},[t._v(\"#\")]),t._v(\" update\")]),t._v(\" \"),e(\"h1\",{attrs:{id:\"-5\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#-5\"}},[t._v(\"#\")]),t._v(\" (```)\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[t._v('update(options) {\\n    options = options || {};\\n    return new Promise((resolve, reject) => {\\n        options.where = options.where || {};\\n        options.newdata = options.newdata || {};\\n        options.type = options.type || 1;\\n        options.type = options.type === 1 ? \"updateOne\" : \"updateMany\";\\n        options.colname[options.type](options.where, options.newdata, (err) => {\\n            err ? reject(err) : resolve();\\n        })\\n    })\\n}\\n')])])]),e(\"h1\",{attrs:{id:\"-6\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#-6\"}},[t._v(\"#\")]),t._v(\" (```)\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"delete\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#delete\"}},[t._v(\"#\")]),t._v(\" delete\")]),t._v(\" \"),e(\"h1\",{attrs:{id:\"-7\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#-7\"}},[t._v(\"#\")]),t._v(\" (```)\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[t._v('delete(options) {\\n    return new Promise((resolve, reject) => {\\n        options = options || {};\\n        options.type = options.type || 1;\\n        options.type = options.type === 1 ? \"deleteOne\" : \"deleteMany\";\\n        options.where = options.where || {};\\n        options.colname[options.type](options.where, (err) => {\\n            err ? reject(err) : resolve();\\n        });\\n    })\\n}\\n')])])]),e(\"h1\",{attrs:{id:\"-8\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#-8\"}},[t._v(\"#\")]),t._v(\" (```)\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"find\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#find\"}},[t._v(\"#\")]),t._v(\" find\")]),t._v(\" \"),e(\"h1\",{attrs:{id:\"-9\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#-9\"}},[t._v(\"#\")]),t._v(\" (```)\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[t._v('find(options) {\\n    return new Promise((resolve, reject) => {\\n        options = options || {};\\n        options.where = options.where || {};\\n        options.show = options.show || {\\n            _id: 0,\\n            __v: 0\\n        };\\n        options.setting = options.setting || {};\\n        let find = options.colname.find(options.where, options.show, (ere, data) => {\\n            if (data.length != undefined) {\\n                let arr = [];\\n                data.forEach((val) => {\\n                    arr.push(val._doc);\\n                })\\n                resolve(arr)\\n            } else {\\n                reject(data);\\n            }\\n        });\\n        if (typeof options.setting.sort === \"object\") {\\n            find.sort(options.setting.sort);\\n        }\\n        if (typeof options.setting.limit === \"number\") {\\n            find.limit(options.setting.limit);\\n        }\\n        if (typeof options.setting.skip === \"number\") {\\n            find.skip(options.setting.skip);\\n        }\\n    })\\n}\\n')])])]),e(\"h1\",{attrs:{id:\"-10\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#-10\"}},[t._v(\"#\")]),t._v(\" (```)\")])])}),[],!1,null,null,null);n.default=s.exports}}]);","extractedComments":[]}